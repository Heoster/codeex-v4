{"entities":{"User":{"$schema":"http://json-schema.org/draft-07/schema#","title":"User","type":"object","description":"Represents a user of the CODEEX AI application.","properties":{"id":{"type":"string","description":"Unique identifier for the User entity."},"googleId":{"type":"string","description":"User identifier from Google, used for Google Sign-In."},"email":{"type":"string","description":"Email address of the user.","format":"email"},"displayName":{"type":"string","description":"Display name of the user."},"photoURL":{"type":"string","description":"URL of the user's profile picture.","format":"uri"},"creationTimestamp":{"type":"string","description":"Timestamp indicating when the user account was created.","format":"date-time"},"lastLoginTimestamp":{"type":"string","description":"Timestamp indicating the last time the user logged in.","format":"date-time"},"voicePreference":{"type":"string","description":"The user's preferred voice for text-to-speech."}},"required":["id"]}},"auth":{"providers":["password","google.com"]},"firestore":{"structure":[{"path":"/users/{userId}","definition":{"entityName":"User","schema":{"$ref":"#/backend/entities/User"},"description":"Stores user profile information.  Authorization is based on path ownership: only the user with the matching {userId} can access their document.","params":[{"name":"userId","description":"The unique identifier for the user."}]}}],"reasoning":"The Firestore structure prioritizes authorization independence and simplifies security rules. User data is stored under `/users/{userId}`. This path-based ownership model is highly secure and makes ownership-based security rules simple and efficient. The structure avoids hierarchical authorization dependencies by ensuring that access control is determined solely by the document path and the authenticated user's ID, thus guaranteeing atomic operations and debuggability. By segregating user-specific data under their respective `userId`, we adhere to the principle of homogeneous security posture, ensuring all documents within a collection share the same security requirements. This design supports secure `list` operations, as access is directly tied to the user ID in the path."}}